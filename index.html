<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cold Email Generator - AI-Powered Email Writer</title>
    <meta name="description" content="Generate personalized cold emails that get responses. AI-powered, free, and private.">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: system-ui, -apple-system, sans-serif;
            background: linear-gradient(to bottom right, #0f172a, #1e293b);
            min-height: 100vh;
            padding: 24px;
            color: white;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 32px;
        }

        h1 {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        h1 span {
            color: #34d399;
        }

        .tagline {
            color: #94a3b8;
        }

        .card {
            background-color: #1e293b;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
            border: 1px solid #334155;
        }

        .api-card {
            padding: 16px;
        }

        label {
            font-size: 12px;
            font-weight: 600;
            color: #34d399;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
            display: block;
        }

        .label-muted {
            color: #94a3b8;
        }

        .label-optional {
            color: #64748b;
            font-weight: normal;
            text-transform: none;
        }

        input, textarea {
            width: 100%;
            background-color: #0f172a;
            border: 1px solid #475569;
            border-radius: 12px;
            padding: 12px 16px;
            color: white;
            font-size: 14px;
            margin-bottom: 12px;
            outline: none;
            transition: border-color 0.2s;
            font-family: inherit;
        }

        input:focus, textarea:focus {
            border-color: #34d399;
        }

        input::placeholder, textarea::placeholder {
            color: #64748b;
        }

        .api-row {
            display: flex;
            gap: 8px;
        }

        .api-row input {
            flex: 1;
            margin-bottom: 0;
        }

        .btn-icon {
            padding: 12px 16px;
            background-color: #334155;
            border: none;
            border-radius: 12px;
            color: #94a3b8;
            cursor: pointer;
            font-size: 16px;
        }

        .btn-icon:hover {
            background-color: #475569;
        }

        .hint {
            font-size: 12px;
            color: #64748b;
            margin-top: 8px;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 24px;
        }

        @media (min-width: 900px) {
            .grid {
                grid-template-columns: 1fr 1.2fr;
            }
        }

        h2 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
        }

        textarea {
            resize: none;
            min-height: 80px;
        }

        .textarea-small {
            min-height: 60px;
        }

        .textarea-large {
            min-height: 120px;
        }

        .btn-generate {
            width: 100%;
            padding: 14px;
            background: linear-gradient(to right, #10b981, #059669);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: opacity 0.2s;
            margin-bottom: 12px;
        }

        .btn-generate:hover {
            opacity: 0.9;
        }

        .btn-generate:disabled {
            background: #475569;
            cursor: not-allowed;
        }

        .btn-secondary {
            width: 100%;
            padding: 14px;
            background: transparent;
            border: 1px solid #475569;
            border-radius: 12px;
            color: #94a3b8;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-secondary:hover {
            border-color: #34d399;
            color: #34d399;
        }

        .output-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            flex-wrap: wrap;
            gap: 8px;
        }

        .output-actions {
            display: flex;
            gap: 8px;
        }

        .btn-small {
            padding: 8px 12px;
            background-color: #334155;
            border: none;
            border-radius: 8px;
            color: #94a3b8;
            font-size: 14px;
            cursor: pointer;
        }

        .btn-small:hover {
            background-color: #475569;
        }

        .output-box {
            background-color: #0f172a;
            border-radius: 12px;
            padding: 16px;
            min-height: 500px;
            border: 1px solid #334155;
            overflow-y: auto;
        }

        .output-placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 468px;
            color: #64748b;
            text-align: center;
            line-height: 1.6;
        }

        .output-text {
            color: #e2e8f0;
            white-space: pre-wrap;
            font-size: 14px;
            line-height: 1.6;
        }

        .version-container {
            margin-bottom: 24px;
            padding-bottom: 24px;
            border-bottom: 1px solid #334155;
        }

        .version-container:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .version-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .version-label {
            font-size: 12px;
            font-weight: 600;
            color: #34d399;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .version-copy {
            padding: 4px 10px;
            background-color: #334155;
            border: none;
            border-radius: 6px;
            color: #94a3b8;
            font-size: 12px;
            cursor: pointer;
        }

        .version-copy:hover {
            background-color: #475569;
        }

        footer {
            text-align: center;
            margin-top: 32px;
            color: #64748b;
            font-size: 14px;
        }

        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 468px;
            color: #94a3b8;
        }

        .collapsible-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            padding: 12px 0;
        }

        .collapsible-header:hover .label-muted {
            color: #34d399;
        }

        .collapsible-content {
            display: none;
            padding-top: 8px;
        }

        .collapsible-content.open {
            display: block;
        }

        .toggle-icon {
            color: #64748b;
            transition: transform 0.2s;
        }

        .toggle-icon.open {
            transform: rotate(180deg);
        }

        .version-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }

        .version-tab {
            padding: 8px 16px;
            background-color: #334155;
            border: none;
            border-radius: 8px;
            color: #94a3b8;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .version-tab:hover {
            background-color: #475569;
        }

        .version-tab.active {
            background-color: #34d399;
            color: #0f172a;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Cold Email <span>Generator</span></h1>
            <p class="tagline">Generate personalized cold emails that get responses</p>
        </header>

        <div class="card api-card">
            <label class="label-muted">OpenAI API Key</label>
            <div class="api-row">
                <input type="password" id="apiKey" placeholder="sk-...">
                <button class="btn-icon" id="toggleKey" onclick="toggleApiKey()">üëÅÔ∏è</button>
            </div>
            <p class="hint">Your key is never stored. Only used for this session.</p>
        </div>

        <div class="grid">
            <div class="card">
                <h2>üìù Email Details</h2>
                
                <label>About You</label>
                <input type="text" id="myName" placeholder="Your name">
                <input type="text" id="myRole" placeholder="Your role (e.g. Founder, Sales Rep)">
                <input type="text" id="myCompany" placeholder="Your company">

                <label>About Recipient</label>
                <input type="text" id="recipientName" placeholder="Recipient's name">
                <input type="text" id="recipientRole" placeholder="Their role (e.g. CEO, Marketing Director)">
                <input type="text" id="recipientCompany" placeholder="Their company">

                <label>Purpose</label>
                <textarea id="purpose" placeholder="What do you want to achieve? (e.g. Schedule a demo call, Offer partnership)"></textarea>

                <label>Tone & Style <span class="label-optional">(optional)</span></label>
                <input type="text" id="toneStyle" placeholder="e.g. Friendly but professional, slightly humorous, under 100 words">

                <label>Output Language</label>
                <select id="outputLanguage" style="width: 100%; background-color: #0f172a; border: 1px solid #475569; border-radius: 12px; padding: 12px 16px; color: white; font-size: 14px; margin-bottom: 12px; outline: none;">
                    <option value="English">English</option>
                    <option value="ÌïúÍµ≠Ïñ¥">ÌïúÍµ≠Ïñ¥</option>
                    <option value="Êó•Êú¨Ë™û">Êó•Êú¨Ë™û</option>
                    <option value="‰∏≠Êñá">‰∏≠Êñá</option>
                    <option value="Espa√±ol">Espa√±ol</option>
                    <option value="Fran√ßais">Fran√ßais</option>
                    <option value="Deutsch">Deutsch</option>
                    <option value="Italiano">Italiano</option>
                    <option value="Portugu√™s">Portugu√™s</option>
                    <option value="–†—É—Å—Å–∫–∏–π">–†—É—Å—Å–∫–∏–π</option>
                    <option value="‡§π‡§ø‡§®‡•ç‡§¶‡•Ä">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
                    <option value="‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bengali)</option>
                    <option value="‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</option>
                    <option value="‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)</option>
                    <option value="ÿßŸÑÿπÿ±ÿ®Ÿäÿ©">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
                </select>

                <!-- Collapsible Follow-up Section -->
                <div class="collapsible-header" onclick="toggleFollowUp()">
                    <label class="label-muted" style="margin-bottom: 0; cursor: pointer;">üì® Follow-up Context <span class="label-optional">(optional)</span></label>
                    <span class="toggle-icon" id="followUpIcon">‚ñº</span>
                </div>
                <div class="collapsible-content" id="followUpSection">
                    <textarea id="previousContext" class="textarea-large" placeholder="Paste any previous email conversation here. This helps generate relevant follow-up emails that reference your earlier discussion."></textarea>
                </div>

                <div style="margin-top: 16px;">
                    <button class="btn-generate" id="generateBtn" onclick="generateEmail(false)">
                        ‚ú® Generate Email
                    </button>
                    <button class="btn-secondary" id="generate3Btn" onclick="generateEmail(true)">
                        üéØ Generate 3 Versions
                    </button>
                </div>
            </div>

            <div class="card">
                <div class="output-header">
                    <h2>üìß Generated Email</h2>
                    <div class="output-actions" id="outputActions" style="display: none;">
                        <button class="btn-small" onclick="copyAll()">üìã Copy All</button>
                        <button class="btn-small" onclick="clearAll()">üóëÔ∏è Clear</button>
                    </div>
                </div>

                <div id="versionTabs" class="version-tabs" style="display: none;"></div>
                
                <div class="output-box">
                    <div id="outputPlaceholder" class="output-placeholder">
                        Your generated email will appear here<br><br>
                        üí° Tip: Use "Generate 3 Versions" to compare different approaches
                    </div>
                    <div id="outputLoading" class="loading" style="display: none;">
                        ‚ú® Generating your email...
                    </div>
                    <div id="outputContent" style="display: none;"></div>
                </div>
            </div>
        </div>

        <footer>
            <p>Free ¬∑ No tracking ¬∑ No storage</p>
        </footer>
    </div>

    <script>
        let showApiKey = false;
        let generatedEmails = [];
        let activeVersion = 0;

        function toggleApiKey() {
            showApiKey = !showApiKey;
            const input = document.getElementById('apiKey');
            const btn = document.getElementById('toggleKey');
            input.type = showApiKey ? 'text' : 'password';
            btn.textContent = showApiKey ? 'üôà' : 'üëÅÔ∏è';
        }

        function toggleFollowUp() {
            const section = document.getElementById('followUpSection');
            const icon = document.getElementById('followUpIcon');
            section.classList.toggle('open');
            icon.classList.toggle('open');
        }

        async function generateEmail(multipleVersions = false) {
            const apiKey = document.getElementById('apiKey').value;
            if (!apiKey) {
                alert('Please enter your OpenAI API key');
                return;
            }

            const myName = document.getElementById('myName').value;
            const myRole = document.getElementById('myRole').value;
            const myCompany = document.getElementById('myCompany').value;
            const recipientName = document.getElementById('recipientName').value;
            const recipientRole = document.getElementById('recipientRole').value;
            const recipientCompany = document.getElementById('recipientCompany').value;
            const purpose = document.getElementById('purpose').value;
            const toneStyle = document.getElementById('toneStyle').value;
            const previousContext = document.getElementById('previousContext').value;
            const outputLanguage = document.getElementById('outputLanguage').value;

            // Show loading
            document.getElementById('outputPlaceholder').style.display = 'none';
            document.getElementById('outputContent').style.display = 'none';
            document.getElementById('outputLoading').style.display = 'flex';
            document.getElementById('outputActions').style.display = 'none';
            document.getElementById('versionTabs').style.display = 'none';
            document.getElementById('generateBtn').disabled = true;
            document.getElementById('generate3Btn').disabled = true;
            document.getElementById('generateBtn').textContent = '‚ú® Generating...';

            const versionCount = multipleVersions ? 3 : 1;
            const versionInstruction = multipleVersions 
                ? `Generate ${versionCount} DIFFERENT versions of this email. Each version should have a distinctly different approach (e.g., one more direct, one more storytelling, one more question-based). Separate each version with "---VERSION---".` 
                : '';

            const contextSection = previousContext 
                ? `\nPrevious conversation context:\n${previousContext}\n\nThis is a FOLLOW-UP email. Reference the previous conversation naturally.`
                : '';

            const toneInstruction = toneStyle 
                ? `Tone/Style instructions: ${toneStyle}` 
                : 'Tone: Professional but personable';

            const languageInstruction = `IMPORTANT: Write the entire email in ${outputLanguage}. The subject line, body, and signature must all be in ${outputLanguage}.`;

            const prompt = `Write a cold email with the following details:

Sender:
- Name: ${myName || '[Your name]'}
- Role: ${myRole || '[Your role]'}
- Company: ${myCompany || '[Your company]'}

Recipient:
- Name: ${recipientName || '[Recipient]'}
- Role: ${recipientRole || '[Their role]'}
- Company: ${recipientCompany || '[Their company]'}

Purpose of email: ${purpose || 'General outreach'}

${toneInstruction}
${languageInstruction}
${contextSection}

Write a concise, compelling cold email that:
1. Has an attention-grabbing subject line
2. Opens with something relevant to the recipient
3. Clearly states the value proposition
4. Has a clear call to action
5. Feels personal, not templated

${versionInstruction}

Format for each email:
Subject: [subject line]

[email body]

[signature with sender name]`;

            try {
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-4o-mini',
                        messages: [
                            {
                                role: 'system',
                                content: 'You are an expert cold email copywriter. You write concise, personalized emails that get responses. You never use generic phrases like "I hope this email finds you well". Each email you write feels genuine and human.'
                            },
                            {
                                role: 'user',
                                content: prompt
                            }
                        ],
                        max_tokens: multipleVersions ? 1500 : 500,
                        temperature: 0.8
                    })
                });

                const data = await response.json();
                
                if (data.error) {
                    alert('Error: ' + data.error.message);
                    resetUI();
                    return;
                }

                const content = data.choices[0].message.content;
                
                if (multipleVersions) {
                    generatedEmails = content.split('---VERSION---').map(v => v.trim()).filter(v => v);
                    if (generatedEmails.length < 3) {
                        // Fallback if splitting didn't work well
                        generatedEmails = [content];
                    }
                } else {
                    generatedEmails = [content];
                }

                activeVersion = 0;
                displayEmails();

            } catch (error) {
                alert('Error: ' + error.message);
                resetUI();
                return;
            }

            document.getElementById('generateBtn').disabled = false;
            document.getElementById('generate3Btn').disabled = false;
            document.getElementById('generateBtn').textContent = '‚ú® Generate Email';
        }

        function displayEmails() {
            const outputContent = document.getElementById('outputContent');
            const outputActions = document.getElementById('outputActions');
            const versionTabs = document.getElementById('versionTabs');
            
            document.getElementById('outputLoading').style.display = 'none';
            outputContent.style.display = 'block';
            outputActions.style.display = 'flex';

            if (generatedEmails.length > 1) {
                versionTabs.style.display = 'flex';
                versionTabs.innerHTML = generatedEmails.map((_, i) => 
                    `<button class="version-tab ${i === activeVersion ? 'active' : ''}" onclick="switchVersion(${i})">Version ${i + 1}</button>`
                ).join('');
            } else {
                versionTabs.style.display = 'none';
            }

            outputContent.innerHTML = `
                <div class="version-container">
                    <div class="version-header">
                        <span class="version-label">${generatedEmails.length > 1 ? `Version ${activeVersion + 1} of ${generatedEmails.length}` : 'Generated Email'}</span>
                        <button class="version-copy" onclick="copyVersion(${activeVersion})">üìã Copy</button>
                    </div>
                    <div class="output-text">${escapeHtml(generatedEmails[activeVersion])}</div>
                </div>
            `;
        }

        function switchVersion(index) {
            activeVersion = index;
            displayEmails();
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function resetUI() {
            document.getElementById('outputLoading').style.display = 'none';
            document.getElementById('outputPlaceholder').style.display = 'flex';
            document.getElementById('generateBtn').disabled = false;
            document.getElementById('generate3Btn').disabled = false;
            document.getElementById('generateBtn').textContent = '‚ú® Generate Email';
        }

        function copyVersion(index) {
            navigator.clipboard.writeText(generatedEmails[index]);
            event.target.textContent = '‚úÖ Copied!';
            setTimeout(() => {
                event.target.textContent = 'üìã Copy';
            }, 2000);
        }

        function copyAll() {
            const allText = generatedEmails.map((email, i) => 
                generatedEmails.length > 1 ? `=== VERSION ${i + 1} ===\n\n${email}` : email
            ).join('\n\n---\n\n');
            navigator.clipboard.writeText(allText);
            
            const btn = event.target;
            btn.textContent = '‚úÖ Copied!';
            setTimeout(() => {
                btn.textContent = 'üìã Copy All';
            }, 2000);
        }

        function clearAll() {
            document.getElementById('myName').value = '';
            document.getElementById('myRole').value = '';
            document.getElementById('myCompany').value = '';
            document.getElementById('recipientName').value = '';
            document.getElementById('recipientRole').value = '';
            document.getElementById('recipientCompany').value = '';
            document.getElementById('purpose').value = '';
            document.getElementById('toneStyle').value = '';
            document.getElementById('previousContext').value = '';
            document.getElementById('outputContent').style.display = 'none';
            document.getElementById('outputPlaceholder').style.display = 'flex';
            document.getElementById('outputActions').style.display = 'none';
            document.getElementById('versionTabs').style.display = 'none';
            generatedEmails = [];
            activeVersion = 0;
        }
    </script>
</body>
</html>
